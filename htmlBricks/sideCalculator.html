<!DOCTYPE html>
<html>
   <head>
    <link rel="stylesheet" href="../css/calculator.css">
    <META HTTP-EQUIV="Access-Control-Allow-Origin" CONTENT="https://copo.app"> <!--Allows to give focus to calculator-->
    </head>
   <body>
       <script src="../js/lib/math.js"></script>
       
      <form name="calculator" id="calculator">
         <table  id="calculator_table">
            <tr>
               <td colspan="4">
                  <input type="text" name="display" id="calculator_display">
                  <input type="button" name="calculator_historyButton" value ="&#8634;" id="calculator_historyButton" onclick="calc_toggleHistory()">
               </td>
            </tr>
            <tr>
               <td><input type="button" class="calculator_input" name="one" value="1" onclick="calculator.display.value += '1'"></td>
               <td><input type="button" class="calculator_input" name="two" value="2" onclick="calculator.display.value += '2'"></td>
               <td><input type="button" class="calculator_input" name="three" value="3" onclick="calculator.display.value += '3'"></td>
               <td><input type="button" class="calculator_input" class="operator" name="plus" value="+" onclick="calculator.display.value += '+'"></td>
            </tr>
            <tr>
               <td><input type="button" class="calculator_input" name="four" value="4" onclick="calculator.display.value += '4'"></td>
               <td><input type="button" class="calculator_input" name="five" value="5" onclick="calculator.display.value += '5'"></td>
               <td><input type="button" class="calculator_input" name="six" value="6" onclick="calculator.display.value += '6'"></td>
               <td><input type="button" class="calculator_input" class="operator" name="minus" value="-" onclick="calculator.display.value += '-'"></td>
            </tr>
            <tr>
               <td><input type="button" class="calculator_input" name="seven" value="7" onclick="calculator.display.value += '7'"></td>
               <td><input type="button" class="calculator_input" name="eight" value="8" onclick="calculator.display.value += '8'"></td>
               <td><input type="button" class="calculator_input" name="nine" value="9" onclick="calculator.display.value += '9'"></td>
               <td><input type="button" class="calculator_input" class="operator" name="times" value="x" onclick="calculator.display.value += '*'"></td>
            </tr>
            <tr>
               <td><input type="button" class="calculator_input" id="calculator_clear" name="clear" value="c" onclick="calculator.display.value = ''"></td>
               <td><input type="button" class="calculator_input" name="zero" value="0" onclick="calculator.display.value += '0'"></td>
               <td><input type="button" class="calculator_input" name="doit" value="=" onclick="calc_compute()"></td>
               <td><input type="button" class="calculator_input" class="operator" name="div" value="/" onclick="calculator.display.value += '/'"></td>
            </tr>
         </table>
         <div id="calculator_history">

         </div>
      </form>

      <script>
        hints = ['2 inch to mm', "cos(30)+cos(30)", "sqrt(-4)", "x = 7 / 2; x + 3", "0.044deg to arcmin"]
        calculator.display.value = hints[Math.floor((Math.random() * 4))]

        function calc_compute(){
            document.getElementById('calculator_history').innerHTML += calculator.display.value + " = "
            calculator.display.value = math.evaluate(calculator.display.value)
            document.getElementById('calculator_history').innerHTML += calculator.display.value + "<br>"

        }

        function calc_toggleHistory(){
            let position = parseFloat(document.getElementById('calculator_history').style.right);

            if(position >= 0){
               document.getElementById('calculator_history').style.right = "-305px";
            } else {
               document.getElementById('calculator_history').style.right = "5px";
            }
         }

         //avoid refreshing when pressing enter
         document.getElementById("calculator").onkeypress = function(e) {
            var key = e.charCode || e.keyCode || 0;     
            if (key == 13) {
               e.preventDefault();
               calc_compute();
            }
         } 


    </script>
   </body>
   
</html>